<?php
  // Copyright 2019 Energize Andover.  All rights reserved.

  $aEvents =
  [
    [
      'show' => false,
      'when' =>
      [
        'text' => 'Postponed, in response to MA guidance on coronavirus',
        'class' => 'event-text-alert',
        'link' => '',
      ],
      'where' =>
      [
        'text' => 'Public Safety Center',
        'class' => 'event-text-general',
        'link' => 'https://goo.gl/maps/Pzze23UuQ5uCDWv88',
      ],
      'topic' =>
      [
        'text' => 'CCA Public Forum',
        'class' => 'event-text-topic',
        'link' => '',
      ],
      'topic_details' =>
      [
        'Followed by Q&A',
      ],
      'presenters' =>
      [
        [
          'text' => 'Michael Lindstrom, Deputy Town Manager',
          'class' => 'event-text-general',
          'link' => 'https://andoverma.gov/directory.aspx?EID=128',
        ],
        [
          'text' => 'Joyce Losick-Yang, PhD, Sustainability Coordinator',
          'class' => 'event-text-general',
          'link' => 'https://andoverma.gov/816/Sustainability',
        ],
      ],
      'sponsors' =>
      [
      ],
    ],
    [
      'show' => false,
      'when' =>
      [
        'text' => 'Monday, March 25 (time TBA)',
        'class' => 'event-text-general',
        'link' => '',
      ],
      'where' =>
      [
        'text' => 'Senior Center at Ballard Vale United Church',
        'class' => 'event-text-general',
        'link' => 'https://goo.gl/maps/f8XNMAyw1wn2HXfP8',
      ],
      'topic' =>
      [
        'text' => 'CCA Public Forum',
        'class' => 'event-text-topic',
        'link' => '',
      ],
      'topic_details' =>
      [
        'Followed by Q&A',
      ],
      'presenters' =>
      [
        [
          'text' => 'Joyce Losick-Yang, PhD, Sustainability Coordinator',
          'class' => 'event-text-general',
          'link' => 'https://andoverma.gov/816/Sustainability',
        ],
      ],
      'sponsors' =>
      [
        [
          'text' => 'Council on Aging',
          'class' => 'event-text-general',
          'link' => 'https://andoverma.gov/249/Council-on-Aging',
        ],
      ],
    ],
    [
      'show' => false,
      'when' =>
      [
        'text' => 'Wednesday, April 8, 7 - 9 pm',
        'class' => 'event-text-general',
        'link' => 'https://www.eventkeeper.com/mars/xpages/M/MHL/EK.cfm?curOrg=MHL&curMonth=4&curYear=2020&SelectedDate=4/8/2020#4/8/2020',
      ],
      'where' =>
      [
        'text' => 'Memorial Hall Library',
        'class' => 'event-text-general',
        'link' => 'https://goo.gl/maps/PgPLW7oPTGgeF7jh9',
      ],
      'topic' =>
      [
        'text' => 'CCA Public Forum',
        'class' => 'event-text-topic',
        'link' => '',
      ],
      'topic_details' =>
      [
        'Followed by Q&A',
      ],
      'presenters' =>
      [
        [
          'text' => 'Michael Lindstrom, Deputy Town Manager',
          'class' => 'event-text-general',
          'link' => 'https://andoverma.gov/directory.aspx?EID=128',
        ],
        [
          'text' => 'Joyce Losick-Yang, PhD, Sustainability Coordinator',
          'class' => 'event-text-general',
          'link' => 'https://andoverma.gov/816/Sustainability',
        ],
      ],
      'sponsors' =>
      [
      ],
    ],
    [
      'show' => false,
      'when' =>
      [
        'text' => 'Monday, April 27, 7 - 10 pm',
        'class' => 'event-text-general',
        'link' => '',
      ],
      'where' =>
      [
        'text' => 'Collins Center',
        'class' => 'event-text-general',
        'link' => 'https://goo.gl/maps/J4cWWJZiiDj1ToVv8',
      ],
      'topic' =>
      [
        'text' => 'Annual Town Meeting',
        'class' => 'event-text-topic',
        'link' => '',
      ],
      'topic_details' =>
      [
      ],
      'presenters' =>
      [
      ],
      'sponsors' =>
      [
      ],
    ],



    // ==> NOT GONNA HAPPEN ==>


    // [
      // 'when' =>
      // [
        // 'text' => 'Monday, March 16, 7 - 8:30 pm',
        // 'class' => 'event-text-general',
        // 'link' => '',
      // ],
      // 'where' =>
      // [
        // 'text' => 'Memorial Hall Library',
        // 'class' => 'event-text-general',
        // 'link' => 'https://goo.gl/maps/PgPLW7oPTGgeF7jh9',
      // ],
      // 'topic' =>
      // [
        // 'text' => 'Environmental Forum',
        // 'class' => 'event-text-topic',
        // 'link' => 'https://www.andoverwecan.com/events/environmental-forum',
      // ],
      // 'topic_details' =>
      // [
      // ],
      // 'presenters' =>
      // [
        // [
          // 'text' => 'Senator Barry Finegold',
          // 'class' => 'event-text-general',
          // 'link' => 'https://malegislature.gov/Legislators/Profile/BRF0',
        // ],
        // [
          // 'text' => 'Representative Tram Nguyen',
          // 'class' => 'event-text-general',
          // 'link' => 'https://malegislature.gov/Legislators/Profile/TTN1',
        // ],
        // [
          // 'text' => 'Representative Frank Moran',
          // 'class' => 'event-text-general',
          // 'link' => 'https://malegislature.gov/Legislators/Profile/FAM1',
        // ],
        // [
          // 'text' => 'Joyce Losick-Yang, PhD, Sustainability Coordinator',
          // 'class' => 'event-text-general',
          // 'link' => 'https://andoverma.gov/816/Sustainability',
        // ],
        // [
          // 'text' => 'Moderator: Laura Gregory, Select Board Chair',
          // 'class' => 'event-text-general',
          // 'link' => 'https://andoverma.gov/directory.aspx?EID=457',
        // ],
      // ],
      // 'sponsors' =>
      // [
        // [
          // 'text' => 'Andover WECAN',
          // 'class' => 'event-text-general',
          // 'link' => 'https://www.andoverwecan.com/',
        // ],
        // [
          // 'text' => 'Greater Andover Indivisible',
          // 'class' => 'event-text-general',
          // 'link' => 'http://indivisibleandoverma.com/',
        // ],
      // ],
    // ],
    // [
      // 'when' => 'Wednesday, April 22, 3 - 7 pm',
      // 'where' => 'Whole Foods Market',
      // 'where_link' => 'https://goo.gl/maps/tt1kW4pan6iE4RJC8',
      // 'topic' => 'Earth Day',
      // 'topic_link' => '',
      // 'topic_details' =>
      // [
      // ],
      // 'presenters' =>
      // [
        // 'Yashvi Gosalia, AHS junior',
        // 'Eva McKone, AHS sophomore',
      // ],
      // 'sponsors' =>
      // [
      // ],
    // ],

    // <== NOT GONNA HAPPEN <==

  ];


  function formatOptionalLink( $aItem )
  {
    if ( $aItem['link'] )
    {
?>
      <a href="<?=$aItem['link']?>" target="_blank" class="dark-link">
<?php
    }
?>
    <span class="<?=$aItem['class']?>" >
      <?=$aItem['text']?>
    </span>
<?php
    if ( $aItem['link'] )
    {
?>
      </a>
<?php
    }
  }


  function formatEvent( $aEvent, $bList=true )
  {
    if ( $aEvent['show'] )
    {
      $sDtClass = 'class="col-sm-2"';
      $sDdClass = 'class="col-sm-10"';
      $sBulletCode = '&#9702';
      $sEventClass = $bList ? 'class="list-group-item list-group-item-action"' : '';
?>
      <div <?=$sEventClass?> >

        <dl class="row">

          <!-- When -->
          <dt <?=$sDtClass?> >
            When
          </dt>

          <dd <?=$sDdClass?> >
            <?=formatOptionalLink($aEvent['when'])?>
          </dd>

          <!-- Where, with optional link -->
          <dt <?=$sDtClass?> >
            Where
          </dt>
          <dd <?=$sDdClass?> >
            <?=formatOptionalLink($aEvent['where'])?>
          </dd>

          <!-- Topic, with optional link and details -->
          <dt <?=$sDtClass?> >
            Topic
          </dt>
          <dd <?=$sDdClass?> >
            <?=formatOptionalLink($aEvent['topic'])?>
<?php
            $sBullet = ( count( $aEvent['topic_details'] ) > 1 ) ? $sBulletCode : '';
            foreach ( $aEvent['topic_details'] as $sLine )
            {
?>
              <div>
                <small class="event-text-general" >
                  <?=$sBullet?> <?=$sLine?>
                </small>
              </div>
<?php
            }
?>
          </dd>

          <!-- Presenters, optional -->
<?php
          if ( count( $aEvent['presenters'] ) )
          {
?>
            <dt <?=$sDtClass?> >
              Presenters
            </dt>
            <dd <?=$sDdClass?> >
<?php
              foreach ( $aEvent['presenters'] as $aItem )
              {
?>
                <div>
                  <?=formatOptionalLink($aItem)?>
                </div>
<?php
              }
?>
            </dd>

<?php
          }
?>

          <!-- Sponsosrs, optional -->
<?php
          if ( count( $aEvent['sponsors'] ) )
          {
?>
            <dt <?=$sDtClass?> >
              Sponsors
            </dt>

            <dd <?=$sDdClass?> >
<?php
              foreach ( $aEvent['sponsors'] as $aItem )
              {
?>
                <div>
                  <?=formatOptionalLink($aItem)?>
                </div>
<?php
              }
?>
            </dd>
<?php
          }
?>
        </dl>
      </div>
<?php
    }

    return $aEvent['show'];
  }
?>

<style>
  .event-text-topic
  {
    color: #006600;
    font-size: 1.25rem;
  }

  .event-text-alert
  {
    color: red;
  }
</style>